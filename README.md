# s21_decimal

Реализация библиотеки `s21_decimal.h` для работы с типом данных `decimal`, предназначенным для точных финансовых вычислений.

## Содержание

1. [Введение](#введение)
2. [Установка и сборка](#установка-и-сборка)
3. [Использование](#использование)
   - [Арифметические операторы](#арифметические-операторы)
   - [Операторы сравнения](#операторы-сравнения)
   - [Преобразователи](#преобразователи)
   - [Другие функции](#другие-функции)
4. [Тестирование](#тестирование)
5. [Требования к коду](#требования-к-коду)
6. [Лицензия](#лицензия)

## Введение

Проект реализует библиотеку `s21_decimal.h`, добавляющую поддержку типа данных `decimal` для точных вычислений в финансовой сфере. Тип `decimal` исключает погрешности, свойственные числам с плавающей точкой, и работает в диапазоне от -79,228,162,514,264,337,593,543,950,335 до +79,228,162,514,264,337,593,543,950,335. Библиотека включает арифметические операции, сравнения, преобразования и математические функции.

## Установка и сборка

1. Клонируйте репозиторий:
   ```bash
   git clone https://github.com/yourusername/s21_decimal.git
   cd s21_decimal
   ```

2. Соберите проект:
   ```bash
   make
   ```

   Это создаст статическую библиотеку `s21_decimal.a`.

3. Для запуска тестов:
   ```bash
   make test
   ```

4. Для генерации отчета о покрытии кода:
   ```bash
   make gcov_report
   ```

5. Для очистки проекта:
   ```bash
   make clean
   ```

## Использование

### Арифметические операторы

| Функция | Описание | Коды ошибок |
| ------ | ------ | ------ |
| `s21_add` | Сложение двух `decimal` | 0 (OK), 1 (переполнение), 2 (потеря точности), 3 (деление на 0) |
| `s21_sub` | Вычитание | |
| `s21_mul` | Умножение | |
| `s21_div` | Деление | |

**Пример:**
```c
s21_decimal a, b, result;
s21_from_int_to_decimal(5, &a);
s21_from_int_to_decimal(3, &b);
s21_add(a, b, &result);  // result = 8
```

### Операторы сравнения

| Функция | Описание | Возвращает |
| ------ | ------ | ------ |
| `s21_is_less` | Проверка "меньше" | 1 (TRUE), 0 (FALSE) |
| `s21_is_less_or_equal` | "Меньше или равно" | |
| `s21_is_greater` | "Больше" | |
| `s21_is_equal` | "Равно" | |

**Пример:**
```c
s21_decimal x, y;
s21_from_float_to_decimal(3.14, &x);
s21_from_float_to_decimal(2.71, &y);
int cmp = s21_is_greater(x, y);  // 1 (TRUE)
```

### Преобразователи

| Функция | Описание | Коды ошибок |
| ------ | ------ | ------ |
| `s21_from_int_to_decimal` | Конвертация `int` в `decimal` | 0 (OK), 1 (ошибка) |
| `s21_from_float_to_decimal` | Конвертация `float` в `decimal` | |
| `s21_from_decimal_to_int` | Конвертация `decimal` в `int` | |
| `s21_from_decimal_to_float` | Конвертация `decimal` в `float` | |

**Пример:**
```c
s21_decimal dec;
float f;
s21_from_float_to_decimal(123.45, &dec);
s21_from_decimal_to_float(dec, &f);  // f = 123.45
```

### Другие функции

| Функция | Описание |
| ------ | ------ |
| `s21_floor` | Округление вниз |
| `s21_round` | Округление до ближайшего целого |
| `s21_truncate` | Отбрасывание дробной части |
| `s21_negate` | Умножение на -1 |

**Пример:**
```c
s21_decimal value, result;
s21_from_float_to_decimal(-3.9, &value);
s21_floor(value, &result);  // result = -4
```

## Тестирование

- Unit-тесты написаны с использованием библиотеки `Check`.
- Покрытие каждой функции — не менее 80%.
- Для запуска тестов: `make test`.
- Для генерации HTML-отчета о покрытии: `make gcov_report`.

## Требования к коду

- Стандарт языка: C11.
- Компилятор: `gcc`.
- Стиль кода: Google Style.
- Запрещено использование `__int128`.
- Реализация основана на двоичном представлении с массивом `bits[4]`.
- Обработка ошибок: корректные коды возврата для всех операций.
- Сборка: через `Makefile` с целями `all`, `clean`, `test`, `gcov_report`.

## Лицензия

Проект распространяется под лицензией MIT. Подробности в файле [LICENSE](LICENSE).

---

Проект разработан в рамках учебного задания.
